---
import Layout from "@/layouts/Layout.astro";
import {
  Card,
  CardContent,
  CardDescription,
  CardHeader,
  CardTitle,
} from "@/components/ui/card.tsx";
import { Badge } from "@/components/ui/badge.tsx";
import { Alert, AlertTitle, AlertDescription } from "@/components/ui/alert.tsx";
---

<Layout
  title="About Auto ROM Validator by Riley"
  description="Learn about ROM validation, DAT files, and how to preserve your game collection."
>
  <main class="container mx-auto max-w-4xl px-4 py-8">
    <div class="space-y-8">
      <!-- Header -->
      <div class="space-y-4 text-center">
        <h1 class="text-4xl font-bold tracking-tight sm:text-5xl">
          About Web ROM Validator
        </h1>
        <p class="text-muted-foreground mx-auto max-w-2xl text-lg">
          Understanding ROM validation and digital game preservation
        </p>
      </div>

      <!-- What is ROM Validation -->
      <div class="bg-card rounded-lg border shadow-sm">
        <div class="p-6">
          <h2 class="mb-4 text-2xl font-semibold">What is ROM Validation?</h2>
          <div class="space-y-4">
            <p class="text-muted-foreground">
              ROM validation is the process of verifying that your game backup
              files are authentic, complete, and match known good dumps. This
              ensures that your preserved games are accurate representations of
              the original cartridges or discs.
            </p>

            <div class="grid grid-cols-1 gap-4 md:grid-cols-3">
              <Alert className="border-primary/20 bg-primary/5">
                <AlertTitle className="text-primary">
                  Hash Verification
                </AlertTitle>
                <AlertDescription>
                  Uses MD5, SHA-1, and CRC32 checksums to verify file integrity
                </AlertDescription>
              </Alert>

              <Alert className="border-green-500/20 bg-green-500/5">
                <AlertTitle className="text-green-600">DAT Matching</AlertTitle>
                <AlertDescription>
                  Compares against official No-Intro and Redump databases using
                  .DAT files
                </AlertDescription>
              </Alert>

              <Alert className="border-blue-500/20 bg-blue-500/5">
                <AlertTitle className="text-blue-600">
                  Metadata Correction
                </AlertTitle>
                <AlertDescription>
                  Provides correct filenames and organizing information
                </AlertDescription>
              </Alert>
            </div>
          </div>
        </div>
      </div>

      <!-- Supported Platforms -->
      <div class="bg-card rounded-lg border shadow-sm">
        <div class="p-6">
          <h2 class="mb-2 text-2xl font-semibold">Supported Platforms</h2>
          <p class="text-muted-foreground mb-4">
            Game systems with official DAT file support
          </p>
          <div class="grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4">
            <Badge variant="outline">Nintendo DS</Badge>
            <Badge variant="outline">Nintendo DSi</Badge>
            <Badge variant="outline">Nintendo 3DS</Badge>
            <Badge variant="outline">Game Boy Advance</Badge>
            <Badge variant="outline">Game Boy / Color</Badge>
            <Badge variant="outline">PSP</Badge>
            <Badge variant="outline">Nintendo 64</Badge>
            <Badge variant="outline">Super Nintendo</Badge>
            <Badge variant="outline">
              <span class="sm:hidden">NES</span>
              <span class="hidden sm:inline">Nintendo Entertainment System</span
              >
            </Badge>
            <Badge variant="outline">PlayStation</Badge>
            <Badge variant="outline">PlayStation 2</Badge>
            <Badge variant="outline">GameCube</Badge>
            <Badge variant="outline">Wii</Badge>
            <Badge variant="outline">Sega Genesis</Badge>
            <Badge variant="outline">Dreamcast</Badge>
          </div>
        </div>
      </div>

      <!-- How It Works -->
      <Card>
        <CardHeader>
          <CardTitle>How It Works</CardTitle>
        </CardHeader>
        <CardContent>
          <div class="space-y-6">
            <div class="flex items-start gap-4">
              <div
                class="bg-primary text-primary-foreground flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold"
              >
                1
              </div>
              <div>
                <h4 class="mb-1 font-semibold">Enhanced Progress Tracking</h4>
                <p class="text-muted-foreground text-sm">
                  Real-time file-by-file progress with detailed stages, time
                  estimates, and persistent display throughout the validation
                  workflow.
                </p>
              </div>
            </div>

            <div class="flex items-start gap-4">
              <div
                class="bg-primary text-primary-foreground flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold"
              >
                2
              </div>
              <div>
                <h4 class="mb-1 font-semibold">Upload Your Files</h4>
                <p class="text-muted-foreground text-sm">
                  Select ROM files with drag & drop or file browser. Auto-scroll
                  navigation keeps relevant content visible during upload and
                  validation.
                </p>
              </div>
            </div>

            <div class="flex items-start gap-4">
              <div
                class="bg-primary text-primary-foreground flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold"
              >
                3
              </div>
              <div>
                <h4 class="mb-1 font-semibold">Smart Platform Detection</h4>
                <p class="text-muted-foreground text-sm">
                  Intelligent detection using file extensions, size analysis,
                  and filename hints. Manual platform selection available for
                  performance optimization.
                </p>
              </div>
            </div>

            <div class="flex items-start gap-4">
              <div
                class="bg-primary text-primary-foreground flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold"
              >
                4
              </div>
              <div>
                <h4 class="mb-1 font-semibold">Hash Calculation</h4>
                <p class="text-muted-foreground text-sm">
                  Calculates MD5, SHA-1, and CRC32 hashes with full transparency
                  and copy-to-clipboard functionality for easy verification.
                </p>
              </div>
            </div>

            <div class="flex items-start gap-4">
              <div
                class="bg-primary text-primary-foreground flex h-8 w-8 items-center justify-center rounded-full text-sm font-semibold"
              >
                5
              </div>
              <div>
                <h4 class="mb-1 font-semibold">DAT Comparison</h4>
                <p class="text-muted-foreground text-sm">
                  Compares against official DAT databases with transparent
                  caching (shows cache vs fresh download), smart fallback, and
                  automatic cleanup.
                </p>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>

      <!-- Advanced Features -->
      <Card>
        <CardHeader>
          <CardTitle>Advanced Features</CardTitle>
        </CardHeader>
        <CardContent>
          <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
            <div class="space-y-4">
              <h4 class="font-semibold">Enhanced User Experience</h4>
              <ul class="text-muted-foreground space-y-2 text-sm">
                <li>• Granular progress tracking with file-by-file status</li>
                <li>• Persistent progress display throughout validation</li>
                <li>
                  • Smart clear functions (all files, progress only, results)
                </li>
                <li>• Auto-scroll navigation for optimal workflow</li>
                <li>• Consistent visual theming with responsive design</li>
              </ul>
            </div>

            <div class="space-y-4">
              <h4 class="font-semibold">Platform Selection & Detection</h4>
              <ul class="text-muted-foreground space-y-2 text-sm">
                <li>• Manual platform override for faster validation</li>
                <li>• Smart fallback to automatic detection if no match</li>
                <li>
                  • Size-based detection for multi-platform formats (.iso)
                </li>
                <li>• Filename keyword recognition (gc, ps2, wii, psp)</li>
              </ul>
            </div>

            <div class="space-y-4">
              <h4 class="font-semibold">DAT Management & Caching</h4>
              <ul class="text-muted-foreground space-y-2 text-sm">
                <li>• Multi-level caching with transparent status reporting</li>
                <li>• Clear console logging (cached vs fresh downloads)</li>
                <li>• Custom DAT upload support with persistent storage</li>
                <li>• DAT browser with accordion interface and search</li>
                <li>• Memory-first bundled DAT loading for performance</li>
              </ul>
            </div>

            <div class="space-y-4">
              <h4 class="font-semibold">Developer Tools</h4>
              <ul class="text-muted-foreground space-y-2 text-sm">
                <li>• Real-time cache status with accurate size tracking</li>
                <li>
                  • Browse cached DATs in formatted viewer with accordions
                </li>
                <li>• Clear cache functions with confirmation dialogs</li>
                <li>• Source identification (bundled/libretro/custom)</li>
                <li>• Consistent UI for all DAT sources and types</li>
              </ul>
            </div>

            <div class="space-y-4">
              <h4 class="font-semibold">Results & Export</h4>
              <ul class="text-muted-foreground space-y-2 text-sm">
                <li>• Status filtering with smart clear button management</li>
                <li>• Detailed file information with interactive modals</li>
                <li>• Hash transparency with one-click copy-to-clipboard</li>
                <li>• Comprehensive export options and validation reports</li>
                <li>• Labeled clear buttons for intuitive workflow control</li>
              </ul>
            </div>
          </div>
        </CardContent>
      </Card>

      <!-- Privacy & Security -->
      <Card>
        <CardHeader>
          <CardTitle>Privacy & Security</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <Alert className="border-green-500/20 bg-green-500/5">
            <AlertTitle className="text-green-600">Complete Privacy</AlertTitle>
            <AlertDescription>
              Your ROM files never leave your computer. All processing happens
              locally in your browser - we only fetch public DAT files for
              comparison and cache them intelligently with transparent reporting
              (console logs show cached vs fresh downloads). Multi-level storage
              (memory + 24-hour localStorage) improves performance while
              minimizing traffic. Custom DAT files you upload are also processed
              and stored entirely locally in your browser.
            </AlertDescription>
          </Alert>

          <Alert className="border-blue-500/20 bg-blue-500/5">
            <AlertTitle className="text-blue-600">No Data Collection</AlertTitle
            >
            <AlertDescription>
              This site uses Cloudflare for content delivery but does not track
              users, store personal data, or use cookies. Only essential browser
              storage is used for DAT file caching (including your custom
              uploads), user preferences (theme selection), and smart cache
              management with transparent status reporting. Theme preferences
              are stored locally on your device only and are never transmitted
              to any server. All cache data includes automatic expiry and
              version control for optimal performance.
            </AlertDescription>
          </Alert>

          <Alert className="border-purple-500/20 bg-purple-500/5">
            <AlertTitle className="text-purple-600">Open Source</AlertTitle>
            <AlertDescription className="inline-block">
              This project is open source and based on the proven <a
                href="https://github.com/RP2/auto-rom-validator"
                target="_blank"
                rel="noopener noreferrer"
                class="font-medium italic hover:underline"
                >auto-rom-validator Python script</a
              >. You can review the code, run it locally, contribute
              improvements, or report bugs on <a
                href="https://github.com/RP2/rom-validate-web"
                target="_blank"
                rel="noopener noreferrer"
                class="font-medium italic hover:underline">GitHub</a
              >. Contributions and feedback are welcome!
            </AlertDescription>
          </Alert>
        </CardContent>
      </Card>

      <!-- Legal Notice -->
      <Card>
        <CardHeader>
          <CardTitle>Legal Notice</CardTitle>
        </CardHeader>
        <CardContent>
          <Alert className="border-yellow-500/20 bg-yellow-500/5">
            <AlertDescription>
              <strong>Important:</strong> This tool is intended solely for legitimate
              game preservation and backups of games you own. It is not designed
              to facilitate piracy. Users are responsible for complying with applicable
              copyright laws in their jurisdiction.
            </AlertDescription>
          </Alert>
        </CardContent>
      </Card>

      <!-- External Resources -->
      <Card>
        <CardHeader>
          <CardTitle>External Resources</CardTitle>
        </CardHeader>
        <CardContent>
          <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
            <div class="space-y-2">
              <h4 class="font-semibold">DAT File Sources</h4>
              <div class="space-y-1">
                <a
                  href="https://datomatic.no-intro.org/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary block text-sm hover:underline"
                >
                  No-Intro DAT Files
                </a>
                <a
                  href="http://redump.org/downloads/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary block text-sm hover:underline"
                >
                  Redump DAT Files
                </a>
              </div>
            </div>

            <div class="space-y-2">
              <h4 class="font-semibold">Preservation Communities</h4>
              <div class="space-y-1">
                <a
                  href="https://github.com/RP2/auto-rom-validator"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary block text-sm hover:underline"
                >
                  Original Python Project
                </a>
                <a
                  href="https://emulation.gametechwiki.com/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary block text-sm hover:underline"
                >
                  Emulation Wiki
                </a>
              </div>
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  </main>
</Layout>
